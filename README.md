

### **全自动ai改文——NovelRemix 操作指南 (零基础版)**



本项目仅供学习参考使用

在使用本项目 (NovelRemix) 前，请您务必仔细阅读并透彻理解本声明。您对本项目的任何使用行为，包括但不限于下载、修改、运行或分发本项目的代码，均将被视为您已充分理解并完全接受本声明的全部条款。

您在使用本项目的过程中，必须承担以下全部责任：

* **法律合规义务：** 您承诺将严格遵守您所在国家或地区、API服务提供商所在地及任何相关司法管辖区的所有适用法律法规。您不得使用本项目从事任何非法活动或为非法活动提供便利，包括但不限于绕过网络管制、处理或传播色情、暴力、仇恨言论等违法信息。
* **API使用条款：** 本项目需要您自行获取并配置第三方服务的API密钥。您必须通过合法渠道获取该API密钥，并严格遵守相应API服务提供商的所有服务条款（Terms of Service）和使用政策。因您违反API服务条款而导致的一切后果（如账户封禁、法律纠纷等），由您自行承担。
* **内容版权责任：** 您必须确保您拥有对所输入、处理的原始文本内容（例如：小说原文）的合法使用权、修改权及其他相关权利。因处理无授权内容而引发的任何版权纠纷或法律问题，均由您自行负责。



这个项目可以帮你把一本小说里的男主角，自动转换成女主角。整个过程分为几个大步骤。




#### **第一步：准备工作**



1. **找到小说文件**：首先，你需要有目标小说的 `.txt` 格式的电子书文件。
2. **解压项目文件**：你会得到一个名为 `NovelRemix` 的压缩包，请先将其解压。解压后你会看到很多文件，我们后面会用到其中的一部分。



#### **第二步：分割小说**



由于一次性把整本小说交给电脑处理可能会出错，我们需要先把小说按章节切成一个个的小文件。

1. **找到 `segment.py`**：在解压出来的文件夹里，进入 `format` 文件夹，找到 `segment.py` 这个文件。
2. **修改 `segment.py`**：
   - 用pycharm打开 `segment.py`。
   - 找到这一行：`novel_file = "某一小说名称.txt"`。
   - **把引号里的书名，改成你自己的小说文件名**，并确保这个小说文件和 `segment.py` 在同一个文件夹里。
   - 保存并关闭文件。
3. **运行 `segment.py`**：在pycharm运行 `segment.py`。程序会自动创建一个名为 `output` 的文件夹，里面就是切分好的小说章节。



#### **第三步：获取并配置 API**



这是最关键的一步，我们需要借助大语言模型（LLM）来修改小说内容。你需要一个 API "钥匙" 才能使用这项服务。

- API 是什么？

  你可以把它想象成一个通行证，让你能够使用别人提供的强大 AI 服务来处理你的小说。

  怎么获取需要自己想办法。

- **如何选择 API？**

  - **Gemini API (官方)**: 如果你使用的是谷歌官方的 Gemini API，请参照 `gemini_api.py` 文件进行配置。
  - **OpenAI 格式的第三方 API**: 如果你从第三方服务商那里获得的 API 是兼容 OpenAI 格式的，请参照 `openai_api.py` 文件进行配置。
  - **Requests 格式的第三方 API**: 如果是其他类型的第三方 API，请参照 `third_api_call.py` 文件进行配置。

- **如何配置？(以 `third_api_call.py` 为例)**

  1. 用pycharm打开 `third_api_call.py`。
  2. **填入你的 API 信息**:
     - `API_KEY = "你的api"`: 把 `"你的api"` 替换成你获取到的 API 密钥。
     - `API_URL = "request的地址..."`: 替换成服务商提供给你的 URL 地址。
     - `MODEL_NAME = "gemini-2.5-pro"`: 通常不需要修改，但如果服务商有特定模型要求，请在这里更改。
  3. **修改主角信息**:
     - 找到 `SYSTEM_PROMPT` 这一大段文字。
     - 将 `（原名为[]）`、`（新名为[]）` 和 `（包括[]与女性配偶[]关系）` 中的 `[]` 替换成小说里的具体名字。
  4. **设置文件夹路径**:
     - `INPUT_FOLDER = '你输入小说的文件夹的目录'`: 改成 `'output'`，因为我们第二步生成的章节文件就在 `output` 文件夹里。
     - `OUTPUT_FOLDER = '输出目录'`: 给输出文件夹起个名字，比如 `'processed_output'`。
  5. 保存文件。



#### **第四步：开始转换**



1. **运行主程序**：根据你选择的 API 类型，pycharm运行 `gemini_api.py`、`openai_api.py` 或 `third_api_call.py`。
2. **耐心等待**：程序会开始处理 `output` 文件夹里的每一个章节文件，并把修改后的文件保存到你设置的输出文件夹里（例如 `processed_output`）。这个过程可能会有点慢，取决于你的小说长度和网络速度。



#### **第五步：合并与整理 **



现在，你已经有了一堆修改好的章节文件，但阅读起来可能不方便。我们可以把它们合并成一个完整的 `.txt` 文件。

1. **找到 `merge.py` ：这个文件都在 `format` 文件夹里。

2. **合并文件**:
   - 将 `merge.py` 复制到 `processed_output` 文件夹中。
   - 双击运行 `merge.py`。它会把所有处理过的章节文件合并成一个名为 `某小说改.txt` 的文件。



#### **大功告成！**



现在，你可以在 `processed_output` 文件夹里找到 `某小说改.txt`，打开它，享受你的定制版小说吧！



### **附：测试 API 连通性**



如果你不确定自己的 API 是否能用，可以使用 `test_files` 文件夹里的测试工具：

- **OpenAI 格式 API**: 修改并运行 `test_openai_connection.py`。
- **Requests 格式 API**: 修改并运行 `test_connection_req.py`。
